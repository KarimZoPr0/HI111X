<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Backend Launcher</title>
    <style>
        :root {
            --bg-color: #1e1e1e;
            --text-color: #f0f0f0;
            --card-bg: #2a2a2a;
            --card-border: #444;
            --highlight: #61dafb;
        }

        [data-theme="light"] {
            --bg-color: #ffffff;
            --text-color: #111;
            --card-bg: #f0f0f0;
            --card-border: #ccc;
            --highlight: #007acc;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin: 20px 0 10px;
            text-align: center;
        }

        .theme-toggle {
            cursor: pointer;
            margin-bottom: 10px;
            font-size: 0.9em;
            background: none;
            border: none;
            color: var(--highlight);
            text-decoration: underline;
        }

        #backend-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 20px;
            width: 90%;
            max-width: 1200px;
            padding: 20px;
            box-sizing: border-box;
        }

        .backend-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s ease;
            cursor: pointer;
        }

        .backend-card:hover {
            transform: scale(1.02);
        }

        .backend-card img.preview {
            width: 100%;
            height: 140px;
            object-fit: cover;
            background: #000;
        }

        .backend-content {
            padding: 15px;
            text-align: center;
        }

        .backend-content img.icon {
            width: 32px;
            height: 32px;
            vertical-align: middle;
            margin-right: 8px;
        }

        .backend-content a {
            color: var(--highlight);
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1em;
        }

        .backend-content a:hover {
            text-decoration: underline;
        }

        .category-title {
            font-size: 1.3em;
            margin: 30px 0 10px;
            text-align: left;
            width: 90%;
            max-width: 1200px;
        }
    </style>
</head>
<body data-theme="dark">
<h1>Backend Launcher</h1>
<button class="theme-toggle" onclick="toggleTheme()">Toggle Theme</button>

<div id="backend-container"></div>

<script>
    const backends = [
        {
            category: "P5.js",
            entries: [
                {
                    name: "p5.js",
                    path: "backends/p5/index.html",
                    icon: "https://p5js.org/assets/img/p5js.svg",
                    preview: "previews/preview.png"
                }
            ]
        },
        {
            category: "SDL2",
            entries: [
                {
                    name: "SDL2",
                    path: "backends/sdl2/index.html",
                    icon: "https://www.libsdl.org/media/SDL_logo.png",
                    preview: "previews/preview.png"
                }
            ]
        }
    ];

    function renderBackends() {
        const container = document.getElementById("backend-container");
        container.innerHTML = '';

        backends.forEach(group => {
            const title = document.createElement('div');
            title.className = 'category-title';
            title.textContent = group.category;
            container.appendChild(title);

            const grid = document.createElement('div');
            grid.className = 'backend-grid';
            grid.id = "backend-list";

            group.entries.forEach(entry => {
                const card = document.createElement('div');
                card.className = 'backend-card';
                card.onclick = () => window.location.href = entry.path;

                const preview = document.createElement('img');
                preview.src = entry.preview || 'https://via.placeholder.com/320x140?text=No+Preview';
                preview.className = 'preview';

                const content = document.createElement('div');
                content.className = 'backend-content';

                const link = document.createElement('a');
                link.href = entry.path;

                if (entry.icon) {
                    const icon = document.createElement('img');
                    icon.src = entry.icon;
                    icon.className = 'icon';
                    link.appendChild(icon);
                }

                link.appendChild(document.createTextNode(entry.name));
                content.appendChild(link);

                card.appendChild(preview);
                card.appendChild(content);
                grid.appendChild(card);
            });

            container.appendChild(grid);
        });
    }

    function toggleTheme() {
        const body = document.body;
        const current = body.getAttribute('data-theme');
        body.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
    }

    renderBackends();
</script>
</body>
</html>
